"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.response = exports.request = void 0;
const utils_1 = require("@aws-appsync/utils");
const helpers_1 = require("../../lib/helpers");
function request(ctx) {
    // add timestamps
    const item = (0, helpers_1.createItem)(ctx.args.input);
    const id = utils_1.util.autoId();
    return {
        operation: 'PutItem',
        key: utils_1.util.dynamodb.toMapValues({
            PK: "BUILDING",
            SK: `BUILDING#${id}`
        }),
        attributeValues: utils_1.util.dynamodb.toMapValues({
            GSI2PK: `USER#${item.userId}`,
            GSI2SK: `BUILDING#${id}`,
            ENTITY: "BUILDING",
            createdOn: utils_1.util.time.nowISO8601(),
            ...item,
        }),
    };
}
exports.request = request;
function response(ctx) {
    return ctx.result;
}
exports.response = response;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlQnVpbGRpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjcmVhdGVCdWlsZGluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw4Q0FBMkU7QUFDM0UsK0NBQStDO0FBRy9DLFNBQWdCLE9BQU8sQ0FDckIsR0FBd0M7SUFFeEMsaUJBQWlCO0lBQ2pCLE1BQU0sSUFBSSxHQUFHLElBQUEsb0JBQVUsRUFBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQU0sQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sRUFBRSxHQUFHLFlBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtJQUV4QixPQUFPO1FBQ0wsU0FBUyxFQUFFLFNBQVM7UUFDcEIsR0FBRyxFQUFFLFlBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO1lBQzdCLEVBQUUsRUFBRSxVQUFVO1lBQ2QsRUFBRSxFQUFFLFlBQVksRUFBRSxFQUFFO1NBQ3JCLENBQUM7UUFDRixlQUFlLEVBQUUsWUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUM7WUFDekMsTUFBTSxFQUFFLFFBQVEsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUM3QixNQUFNLEVBQUUsWUFBWSxFQUFFLEVBQUU7WUFDeEIsTUFBTSxFQUFFLFVBQVU7WUFDbEIsU0FBUyxFQUFFLFlBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ2pDLEdBQUcsSUFBSTtTQUNSLENBQUM7S0FDSCxDQUFDO0FBQ0osQ0FBQztBQXJCRCwwQkFxQkM7QUFFRCxTQUFnQixRQUFRLENBQ3RCLEdBQTBFO0lBRTFFLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNwQixDQUFDO0FBSkQsNEJBSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250ZXh0LCBEeW5hbW9EQlB1dEl0ZW1SZXF1ZXN0LCB1dGlsIH0gZnJvbSAnQGF3cy1hcHBzeW5jL3V0aWxzJztcbmltcG9ydCB7IGNyZWF0ZUl0ZW0gfSBmcm9tICcuLi8uLi9saWIvaGVscGVycyc7XG5pbXBvcnQgeyBNdXRhdGlvbkNyZWF0ZUJ1aWxkaW5nQXJncywgQnVpbGRpbmcgfSBmcm9tICcuLi8uLi90eXBlcy9hcHBzeW5jJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVlc3QoXG4gIGN0eDogQ29udGV4dDxNdXRhdGlvbkNyZWF0ZUJ1aWxkaW5nQXJncz4sXG4pOiBEeW5hbW9EQlB1dEl0ZW1SZXF1ZXN0IHtcbiAgLy8gYWRkIHRpbWVzdGFtcHNcbiAgY29uc3QgaXRlbSA9IGNyZWF0ZUl0ZW0oY3R4LmFyZ3MuaW5wdXQhKTtcbiAgY29uc3QgaWQgPSB1dGlsLmF1dG9JZCgpXG5cbiAgcmV0dXJuIHtcbiAgICBvcGVyYXRpb246ICdQdXRJdGVtJyxcbiAgICBrZXk6IHV0aWwuZHluYW1vZGIudG9NYXBWYWx1ZXMoe1xuICAgICAgUEs6IFwiQlVJTERJTkdcIixcbiAgICAgIFNLOiBgQlVJTERJTkcjJHtpZH1gXG4gICAgfSksXG4gICAgYXR0cmlidXRlVmFsdWVzOiB1dGlsLmR5bmFtb2RiLnRvTWFwVmFsdWVzKHtcbiAgICAgIEdTSTJQSzogYFVTRVIjJHtpdGVtLnVzZXJJZH1gLFxuICAgICAgR1NJMlNLOiBgQlVJTERJTkcjJHtpZH1gLFxuICAgICAgRU5USVRZOiBcIkJVSUxESU5HXCIsXG4gICAgICBjcmVhdGVkT246IHV0aWwudGltZS5ub3dJU084NjAxKCksXG4gICAgICAuLi5pdGVtLFxuICAgIH0pLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzcG9uc2UoXG4gIGN0eDogQ29udGV4dDxNdXRhdGlvbkNyZWF0ZUJ1aWxkaW5nQXJncywgb2JqZWN0LCBvYmplY3QsIG9iamVjdCwgQnVpbGRpbmc+LFxuKSB7XG4gIHJldHVybiBjdHgucmVzdWx0O1xufSJdfQ==