"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.injectLambdaContext = void 0;
/**
 * A middy middleware that adds the current Lambda invocation's context inside all log items.
 *
 * ## Usage
 *
 * @example
 * ```typescript
 * import { Logger, injectLambdaContext } from "@aws-lambda-powertools/logger";
 *
 * import middy from '@middy/core';
 *
 *
 * const logger = new Logger();
 *
 * const lambdaHandler = async (_event: any, _context: any) => {
 *     logger.info("This is an INFO log with some context");
 * };
 *
 *
 * export const handler = middy(lambdaHandler).use(injectLambdaContext(logger));
 * ```
 *
 * @param {Logger|Logger[]} target - The Tracer instance to use for tracing
 * @returns {middy.MiddlewareObj} - The middy middleware object
 */
const injectLambdaContext = (target) => {
    const injectLambdaContextBefore = async (request) => {
        const loggers = target instanceof Array ? target : [target];
        loggers.forEach((logger) => {
            logger.addContext(request.context);
        });
    };
    return {
        before: injectLambdaContextBefore,
    };
};
exports.injectLambdaContext = injectLambdaContext;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlkZHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbWlkZGxld2FyZS9taWRkeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBd0JHO0FBQ0gsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLE1BQXlCLEVBQXVCLEVBQUU7SUFDN0UsTUFBTSx5QkFBeUIsR0FBRyxLQUFLLEVBQUUsT0FBc0IsRUFBaUIsRUFBRTtRQUNoRixNQUFNLE9BQU8sR0FBRyxNQUFNLFlBQVksS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFO1lBQ2pDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0lBRUYsT0FBTztRQUNMLE1BQU0sRUFBRSx5QkFBeUI7S0FDbEMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUdBLGtEQUFtQiJ9