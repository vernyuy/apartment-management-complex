"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PipelineStage = void 0;
const acms_shared_stack_1 = require("./acms-shared-stack");
const user_lambda_stack_1 = require("./user-lambda-stack");
const building_lambda_stack_1 = require("./building-lambda-stack");
const apartment_lambda_stack_1 = require("./apartment-lambda-stack");
const ratings_feedback_stack_1 = require("./ratings-feedback-stack");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const booking_stack_1 = require("./booking-stack");
class PipelineStage extends aws_cdk_lib_1.Stage {
    constructor(scope, id, props) {
        super(scope, id, props);
        const acmsSharedStack = new acms_shared_stack_1.AcmsSharedStack(this, "AcmsSharedStack");
        new user_lambda_stack_1.UserLamdaStacks(this, "UserLambdaStacks", {
            acmsDatabase: acmsSharedStack.acmsDatabase,
            acmsGraphqlApi: acmsSharedStack.acmsGraphqlApi,
        });
        new building_lambda_stack_1.BuildingLamdaStacks(this, "BuildingLambdaStacks", {
            acmsDatabase: acmsSharedStack.acmsDatabase,
            acmsGraphqlApi: acmsSharedStack.acmsGraphqlApi,
        });
        new apartment_lambda_stack_1.ApartmentLamdaStacks(this, "ApartmentLambdaStacks", {
            acmsDatabase: acmsSharedStack.acmsDatabase,
            acmsGraphqlApi: acmsSharedStack.acmsGraphqlApi,
        });
        new ratings_feedback_stack_1.RatingsAndFeedbackStack(this, "RatingsAndFeedbackStack", {
            acmsDatabase: acmsSharedStack.acmsDatabase,
            acmsGraphqlApi: acmsSharedStack.acmsGraphqlApi,
        });
        const bookingStack = new booking_stack_1.BookingStacks(this, "BookingLambdaStacks", {
            acmsDatabase: acmsSharedStack.acmsDatabase,
            acmsGraphqlApi: acmsSharedStack.acmsGraphqlApi,
            // apiSchema: acmsSharedStack.apiSchema,
        });
        // new DdbStreamLamdaStacks(this, "DdbStreamLambdaStacks", {
        //   acmsDatabase: acmsSharedStack.acmsDatabase,
        //   acmsGraphqlApi: acmsSharedStack.acmsGraphqlApi,
        // });
        // bookingStacks.addDependency(acmsSharedStack)
        acmsSharedStack.addDependency(bookingStack);
    }
}
exports.PipelineStage = PipelineStage;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGlwZWxpbmUtc3RhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwaXBlbGluZS1zdGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyREFBc0Q7QUFDdEQsMkRBQXNEO0FBQ3RELG1FQUE4RDtBQUM5RCxxRUFBZ0U7QUFFaEUscUVBQW1FO0FBQ25FLDZDQUFnRDtBQUVoRCxtREFBZ0Q7QUFFaEQsTUFBYSxhQUFjLFNBQVEsbUJBQUs7SUFDdEMsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFpQjtRQUN6RCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4QixNQUFNLGVBQWUsR0FBRyxJQUFJLG1DQUFlLENBQUMsSUFBSSxFQUFFLGlCQUFpQixDQUFDLENBQUM7UUFFckUsSUFBSSxtQ0FBZSxDQUFDLElBQUksRUFBRSxrQkFBa0IsRUFBRTtZQUM1QyxZQUFZLEVBQUUsZUFBZSxDQUFDLFlBQVk7WUFDMUMsY0FBYyxFQUFFLGVBQWUsQ0FBQyxjQUFjO1NBQy9DLENBQUMsQ0FBQztRQUVILElBQUksMkNBQW1CLENBQUMsSUFBSSxFQUFFLHNCQUFzQixFQUFFO1lBQ3BELFlBQVksRUFBRSxlQUFlLENBQUMsWUFBWTtZQUMxQyxjQUFjLEVBQUUsZUFBZSxDQUFDLGNBQWM7U0FDL0MsQ0FBQyxDQUFDO1FBRUgsSUFBSSw2Q0FBb0IsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCLEVBQUU7WUFDdEQsWUFBWSxFQUFFLGVBQWUsQ0FBQyxZQUFZO1lBQzFDLGNBQWMsRUFBRSxlQUFlLENBQUMsY0FBYztTQUMvQyxDQUFDLENBQUM7UUFFSCxJQUFJLGdEQUF1QixDQUFDLElBQUksRUFBRSx5QkFBeUIsRUFBRTtZQUMzRCxZQUFZLEVBQUUsZUFBZSxDQUFDLFlBQVk7WUFDMUMsY0FBYyxFQUFFLGVBQWUsQ0FBQyxjQUFjO1NBQy9DLENBQUMsQ0FBQztRQUVILE1BQU0sWUFBWSxHQUFHLElBQUksNkJBQWEsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLEVBQUU7WUFDbEUsWUFBWSxFQUFFLGVBQWUsQ0FBQyxZQUFZO1lBQzFDLGNBQWMsRUFBRSxlQUFlLENBQUMsY0FBYztZQUM5Qyx3Q0FBd0M7U0FDekMsQ0FBQyxDQUFDO1FBRUgsNERBQTREO1FBQzVELGdEQUFnRDtRQUNoRCxvREFBb0Q7UUFDcEQsTUFBTTtRQUNOLCtDQUErQztRQUMvQyxlQUFlLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFBO0lBRTdDLENBQUM7Q0FDRjtBQXhDRCxzQ0F3Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY21zU2hhcmVkU3RhY2sgfSBmcm9tIFwiLi9hY21zLXNoYXJlZC1zdGFja1wiO1xuaW1wb3J0IHsgVXNlckxhbWRhU3RhY2tzIH0gZnJvbSBcIi4vdXNlci1sYW1iZGEtc3RhY2tcIjtcbmltcG9ydCB7IEJ1aWxkaW5nTGFtZGFTdGFja3MgfSBmcm9tIFwiLi9idWlsZGluZy1sYW1iZGEtc3RhY2tcIjtcbmltcG9ydCB7IEFwYXJ0bWVudExhbWRhU3RhY2tzIH0gZnJvbSBcIi4vYXBhcnRtZW50LWxhbWJkYS1zdGFja1wiO1xuaW1wb3J0IHsgRGRiU3RyZWFtTGFtZGFTdGFja3MgfSBmcm9tIFwiLi9kZGItc3RyZWFtLWxhbWJkYS1zdGFja1wiO1xuaW1wb3J0IHsgUmF0aW5nc0FuZEZlZWRiYWNrU3RhY2sgfSBmcm9tIFwiLi9yYXRpbmdzLWZlZWRiYWNrLXN0YWNrXCI7XG5pbXBvcnQgeyBTdGFnZSwgU3RhZ2VQcm9wcyB9IGZyb20gXCJhd3MtY2RrLWxpYlwiO1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSBcImNvbnN0cnVjdHNcIjtcbmltcG9ydCB7IEJvb2tpbmdTdGFja3MgfSBmcm9tIFwiLi9ib29raW5nLXN0YWNrXCI7XG5cbmV4cG9ydCBjbGFzcyBQaXBlbGluZVN0YWdlIGV4dGVuZHMgU3RhZ2Uge1xuICBjb25zdHJ1Y3RvcihzY29wZTogQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogU3RhZ2VQcm9wcykge1xuICAgIHN1cGVyKHNjb3BlLCBpZCwgcHJvcHMpO1xuXG4gICAgY29uc3QgYWNtc1NoYXJlZFN0YWNrID0gbmV3IEFjbXNTaGFyZWRTdGFjayh0aGlzLCBcIkFjbXNTaGFyZWRTdGFja1wiKTtcblxuICAgIG5ldyBVc2VyTGFtZGFTdGFja3ModGhpcywgXCJVc2VyTGFtYmRhU3RhY2tzXCIsIHtcbiAgICAgIGFjbXNEYXRhYmFzZTogYWNtc1NoYXJlZFN0YWNrLmFjbXNEYXRhYmFzZSxcbiAgICAgIGFjbXNHcmFwaHFsQXBpOiBhY21zU2hhcmVkU3RhY2suYWNtc0dyYXBocWxBcGksXG4gICAgfSk7XG5cbiAgICBuZXcgQnVpbGRpbmdMYW1kYVN0YWNrcyh0aGlzLCBcIkJ1aWxkaW5nTGFtYmRhU3RhY2tzXCIsIHtcbiAgICAgIGFjbXNEYXRhYmFzZTogYWNtc1NoYXJlZFN0YWNrLmFjbXNEYXRhYmFzZSxcbiAgICAgIGFjbXNHcmFwaHFsQXBpOiBhY21zU2hhcmVkU3RhY2suYWNtc0dyYXBocWxBcGksXG4gICAgfSk7XG5cbiAgICBuZXcgQXBhcnRtZW50TGFtZGFTdGFja3ModGhpcywgXCJBcGFydG1lbnRMYW1iZGFTdGFja3NcIiwge1xuICAgICAgYWNtc0RhdGFiYXNlOiBhY21zU2hhcmVkU3RhY2suYWNtc0RhdGFiYXNlLFxuICAgICAgYWNtc0dyYXBocWxBcGk6IGFjbXNTaGFyZWRTdGFjay5hY21zR3JhcGhxbEFwaSxcbiAgICB9KTtcblxuICAgIG5ldyBSYXRpbmdzQW5kRmVlZGJhY2tTdGFjayh0aGlzLCBcIlJhdGluZ3NBbmRGZWVkYmFja1N0YWNrXCIsIHtcbiAgICAgIGFjbXNEYXRhYmFzZTogYWNtc1NoYXJlZFN0YWNrLmFjbXNEYXRhYmFzZSxcbiAgICAgIGFjbXNHcmFwaHFsQXBpOiBhY21zU2hhcmVkU3RhY2suYWNtc0dyYXBocWxBcGksXG4gICAgfSk7XG5cbiAgICBjb25zdCBib29raW5nU3RhY2sgPSBuZXcgQm9va2luZ1N0YWNrcyh0aGlzLCBcIkJvb2tpbmdMYW1iZGFTdGFja3NcIiwge1xuICAgICAgYWNtc0RhdGFiYXNlOiBhY21zU2hhcmVkU3RhY2suYWNtc0RhdGFiYXNlLFxuICAgICAgYWNtc0dyYXBocWxBcGk6IGFjbXNTaGFyZWRTdGFjay5hY21zR3JhcGhxbEFwaSxcbiAgICAgIC8vIGFwaVNjaGVtYTogYWNtc1NoYXJlZFN0YWNrLmFwaVNjaGVtYSxcbiAgICB9KTtcblxuICAgIC8vIG5ldyBEZGJTdHJlYW1MYW1kYVN0YWNrcyh0aGlzLCBcIkRkYlN0cmVhbUxhbWJkYVN0YWNrc1wiLCB7XG4gICAgLy8gICBhY21zRGF0YWJhc2U6IGFjbXNTaGFyZWRTdGFjay5hY21zRGF0YWJhc2UsXG4gICAgLy8gICBhY21zR3JhcGhxbEFwaTogYWNtc1NoYXJlZFN0YWNrLmFjbXNHcmFwaHFsQXBpLFxuICAgIC8vIH0pO1xuICAgIC8vIGJvb2tpbmdTdGFja3MuYWRkRGVwZW5kZW5jeShhY21zU2hhcmVkU3RhY2spXG4gICAgYWNtc1NoYXJlZFN0YWNrLmFkZERlcGVuZGVuY3koYm9va2luZ1N0YWNrKVxuXG4gIH1cbn1cbiJdfQ==